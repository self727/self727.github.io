<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>æœ‰ç“œæ•…äº‹ä¼š Â· ç¯å¢ƒé“¾æ¥æ±‡æ€»ï¼ˆå®æ—¶åˆ·æ–°ï¼‰</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 2em; background: #f9f9f9; }
        section { margin-bottom: 2em; background: #fff; padding: 1em; border: 1px dashed #ccc; }
        h2 { color: #333; }
        ul { list-style: none; padding-left: 0; }
        li { margin-bottom: 0.5em; }
        a { color: #007acc; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<h1>ğŸ‰ æœ‰ç“œæ•…äº‹ä¼š Â· ç¯å¢ƒé“¾æ¥æ±‡æ€»ï¼ˆå®æ—¶åˆ·æ–°ï¼‰</h1>
<div id="container">åŠ è½½ä¸­...</div>

<script>
    const JSON_URL = 'https://web-1256805236.cos.ap-guangzhou.myqcloud.com/env.json';
    let currentVersion = 0;

    async function fetchAndRenderIfUpdated() {
        try {
            const res = await fetch(JSON_URL + '?t=' + Date.now()); // é˜²ç¼“å­˜
            const data = await res.json();

            if (data.version > currentVersion) {
                currentVersion = data.version;
                render(data);
            }
        } catch (err) {
            document.getElementById('container').innerHTML = 'âŒ åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ COS é…ç½®æˆ– JSON æ ¼å¼';
            console.error(err);
        }
    }

    function render(data) {
        const container = document.getElementById('container');
        container.innerHTML = '';

        Object.entries(data).forEach(([env, links]) => {
            if (env === 'version') return;

            const section = document.createElement('section');
            section.innerHTML = `<h2>${env}</h2><ul></ul>`;
            const ul = section.querySelector('ul');

            Object.entries(links).forEach(([label, url]) => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${label}ï¼š</strong> <a href="${url}" target="_blank">${url}</a>`;
                ul.appendChild(li);
            });

            container.appendChild(section);
        });
    }

    fetchAndRenderIfUpdated(); // åˆå§‹åŠ è½½
    setInterval(fetchAndRenderIfUpdated, 3000); // æ¯ 3 ç§’æ£€æŸ¥ç‰ˆæœ¬å·
</script>
</body>
</html>
